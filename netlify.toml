[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"
  NODE_OPTIONS = "--max-old-space-size=4096"

# Increase request body size limit for file uploads (up to 200MB)
[[plugins]]
  package = "@netlify/plugin-nextjs"

[functions]
  # Increase function timeout and memory for large file uploads
  node_bundler = "esbuild"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[images]
  remote_images = [
    "https://source.unsplash.com/.*",
    "https://images.unsplash.com/.*",
    "https://ext.same-assets.com/.*",
    "https://ugc.same-assets.com/.*",
    "https://res.cloudinary.com/.*",
    "https://.*.supabase.co/.*"
  ]